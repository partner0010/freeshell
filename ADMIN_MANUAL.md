# Shell 관리자 메뉴얼

## 📋 목차

1. [관리자 계정 정보](#관리자-계정-정보)
2. [관리자 로그인](#관리자-로그인)
3. [관리자 대시보드](#관리자-대시보드)
4. [주요 관리 기능](#주요-관리-기능)
5. [환경 변수 설정](#환경-변수-설정)
6. [보안 설정](#보안-설정)
7. [문제 해결](#문제-해결)

---

## 🔐 관리자 계정 정보

### 기본 관리자 계정

**이메일**: `admin@freeshell.co.kr`  
**비밀번호**: `Admin123!@#`

⚠️ **중요**: 프로덕션 환경에서는 반드시 비밀번호를 변경하세요!

### 비밀번호 변경 방법

1. `.env.local` 파일에 다음 추가:
   ```env
   ADMIN_EMAIL=your-admin-email@freeshell.co.kr
   ADMIN_PASSWORD=your-secure-password
   ```

2. 비밀번호는 다음 조건을 만족해야 합니다:
   - 최소 8자 이상
   - 대문자, 소문자, 숫자, 특수문자 포함
   - 예: `MySecure123!@#`

---

## 🚪 관리자 로그인

### 접속 방법

1. 브라우저에서 다음 URL로 접속:
   ```
   https://freeshell.co.kr/admin/login
   ```

2. 관리자 이메일과 비밀번호 입력

3. 로그인 버튼 클릭

### 로그인 실패 시

- 이메일과 비밀번호 확인
- 5분에 5회 이상 실패 시 5분간 로그인 제한
- 문제가 지속되면 시스템 관리자에게 문의

---

## 📊 관리자 대시보드

### 대시보드 메인 화면

관리자 대시보드(`/admin`)에서 다음 정보를 확인할 수 있습니다:

#### 통계 카드
- **전체 사용자**: 등록된 전체 사용자 수
- **활성 사용자**: 최근 30일 내 활동한 사용자 수
- **총 검색 수**: 전체 검색 요청 수
- **API 사용률**: 현재 API 사용률 (%)

#### 시스템 상태
- **정상 작동 중**: 모든 시스템이 정상 작동
- **주의 필요**: 일부 시스템에 경고 발생
- **오류 발생**: 심각한 오류 발생

---

## 🛠️ 주요 관리 기능

### 1. 사용자 관리 (`/admin/users`)

**기능**:
- 사용자 목록 조회
- 사용자 계정 상태 변경 (활성/비활성)
- 사용자 권한 관리
- 사용자 삭제

**사용 예시**:
- 부적절한 사용자 계정 비활성화
- 프리미엄 사용자 권한 부여
- 사용자 통계 확인

### 2. 분석 및 통계 (`/admin/analytics`)

**기능**:
- 일일/주간/월간 사용량 통계
- API 사용량 분석
- 인기 검색어 분석
- 사용자 활동 추이

**사용 예시**:
- 트래픽 증가 추이 확인
- API 비용 예측
- 사용자 행동 패턴 분석

### 3. 시스템 설정 (`/admin/settings`)

**기능**:
- 환경 변수 관리
- 시스템 구성 변경
- 캐시 관리
- 데이터베이스 설정

**주의사항**:
- 환경 변수 변경 시 서버 재시작 필요
- 중요한 설정 변경 전 백업 권장

### 4. API 키 관리 (`/admin/api-keys`)

**기능**:
- OpenAI API 키 관리
- Anthropic API 키 관리
- Google Gemini API 키 관리
- API 키 사용량 모니터링

**사용 예시**:
- API 키 추가/변경
- API 키 사용량 확인
- API 키 비활성화

### 5. 로그 관리 (`/admin/logs`)

**기능**:
- 시스템 로그 조회
- 에러 로그 확인
- 접근 로그 분석
- 로그 필터링 및 검색

**사용 예시**:
- 에러 발생 원인 분석
- 보안 이벤트 확인
- 사용자 활동 추적

### 6. 도메인 관리 (`/admin/domains`)

**기능**:
- 도메인 설정
- SSL 인증서 관리
- 리디렉션 설정
- DNS 설정

---

## ⚙️ 환경 변수 설정

### 필수 환경 변수

`.env.local` 파일에 다음 변수들을 설정하세요:

```env
# 관리자 계정
ADMIN_EMAIL=admin@freeshell.co.kr
ADMIN_PASSWORD=your-secure-password

# NextAuth
NEXTAUTH_SECRET=your-secret-key-at-least-32-characters-long
NEXTAUTH_URL=https://freeshell.co.kr

# API 키
OPENAI_API_KEY=sk-your-openai-api-key-here
ANTHROPIC_API_KEY=your-anthropic-api-key-here
GOOGLE_API_KEY=your-google-api-key-here
KLING_API_KEY=your-kling-api-key-here
ELEVENLABS_API_KEY=your-elevenlabs-api-key-here

# 데이터베이스 (선택사항)
DATABASE_URL=your-database-url-here
```

### 환경 변수 적용

1. `.env.local` 파일 수정
2. 서버 재시작:
   ```bash
   npm run dev  # 개발 환경
   npm run build && npm start  # 프로덕션 환경
   ```

---

## 🔒 보안 설정

### 관리자 계정 보안

1. **강력한 비밀번호 사용**
   - 최소 12자 이상
   - 대문자, 소문자, 숫자, 특수문자 포함
   - 정기적으로 비밀번호 변경

2. **2단계 인증 (추후 구현)**
   - Google Authenticator 연동
   - SMS 인증

3. **IP 화이트리스트 (추후 구현)**
   - 특정 IP에서만 관리자 접근 허용

### API 키 보안

1. **환경 변수 사용**
   - API 키를 코드에 직접 작성하지 않음
   - `.env.local` 파일 사용 (Git에 커밋하지 않음)

2. **키 로테이션**
   - 정기적으로 API 키 변경
   - 사용하지 않는 키 삭제

3. **사용량 모니터링**
   - 비정상적인 API 사용량 감지
   - 사용량 제한 설정

---

## 🐛 문제 해결

### 관리자 로그인이 안 될 때

1. **이메일/비밀번호 확인**
   - 기본 계정: `admin@freeshell.co.kr` / `Admin123!@#`
   - 환경 변수에 설정된 계정 확인

2. **환경 변수 확인**
   ```bash
   # .env.local 파일 확인
   cat .env.local | grep ADMIN
   ```

3. **서버 재시작**
   ```bash
   # 개발 환경
   npm run dev
   
   # 프로덕션 환경
   npm run build && npm start
   ```

4. **브라우저 캐시 삭제**
   - 브라우저 개발자 도구 (F12)
   - Application → Local Storage → `admin_token` 삭제

### 대시보드가 로드되지 않을 때

1. **네트워크 연결 확인**
   - 인터넷 연결 상태 확인
   - 방화벽 설정 확인

2. **서버 로그 확인**
   ```bash
   # 개발 환경
   # 터미널에서 에러 메시지 확인
   
   # 프로덕션 환경
   # 배포 플랫폼의 로그 확인
   ```

3. **API 엔드포인트 확인**
   - `/api/admin/verify` 엔드포인트 작동 확인
   - 브라우저 개발자 도구 → Network 탭 확인

### 통계 데이터가 표시되지 않을 때

1. **데이터베이스 연결 확인**
   - `DATABASE_URL` 환경 변수 확인
   - 데이터베이스 서버 상태 확인

2. **API 키 확인**
   - API 키가 올바르게 설정되었는지 확인
   - API 키 사용량 한도 확인

---

## 📞 지원

### 문의 사항

- 이메일: `support@freeshell.co.kr`
- 관리자 대시보드: `https://freeshell.co.kr/admin`

### 긴급 상황

시스템에 심각한 문제가 발생한 경우:
1. 관리자 대시보드에서 시스템 상태 확인
2. 로그 관리에서 에러 로그 확인
3. 필요 시 서버 재시작

---

## 📝 체크리스트

### 초기 설정

- [ ] 관리자 비밀번호 변경
- [ ] 환경 변수 설정
- [ ] API 키 설정
- [ ] 서버 재시작
- [ ] 관리자 로그인 테스트

### 정기 점검

- [ ] 주간 사용량 통계 확인
- [ ] API 사용량 모니터링
- [ ] 에러 로그 확인
- [ ] 보안 이벤트 확인
- [ ] 백업 확인

### 보안 점검

- [ ] 관리자 비밀번호 변경 (3개월마다)
- [ ] API 키 로테이션 (6개월마다)
- [ ] 사용자 권한 검토 (월 1회)
- [ ] 보안 로그 검토 (주 1회)

---

## 🔄 업데이트 내역

### 2024-01-XX
- ✅ 관리자 대시보드 생성
- ✅ 관리자 로그인 기능 추가
- ✅ 기본 관리 기능 구현
- ✅ 관리자 메뉴얼 작성

---

**마지막 업데이트**: 2024-01-XX  
**버전**: 1.0.0

